From 82934bd9a25185535d3e4027d067a23f4396c099 Mon Sep 17 00:00:00 2001
From: Soomin Lee <soomin@videolabs.io>
Date: Wed, 30 Mar 2022 10:54:49 +0200
Subject: [PATCH 60/61] Revert "opengl: simplify swizzle"

This reverts commit d6ffeba288c533f0531541fe8a97d8bda60fd25c.
---
 modules/video_output/opengl/fragment_shaders.c | 12 ++++++++++--
 1 file changed, 10 insertions(+), 2 deletions(-)

diff --git a/modules/video_output/opengl/fragment_shaders.c b/modules/video_output/opengl/fragment_shaders.c
index 45690a3c77..2d86a6b32f 100644
--- a/modules/video_output/opengl/fragment_shaders.c
+++ b/modules/video_output/opengl/fragment_shaders.c
@@ -198,8 +198,16 @@ tc_yuv_base_init(opengl_tex_converter_t *tc, GLenum tex_target,
         else
             return VLC_EGENERIC;
 
-        swizzle_per_tex[0] = "r";
-        swizzle_per_tex[1] = "rg";
+        if (oneplane_texfmt == GL_RED)
+        {
+            swizzle_per_tex[0] = "r";
+            swizzle_per_tex[1] = "rg";
+        }
+        else
+        {
+            swizzle_per_tex[0] = "x";
+            swizzle_per_tex[1] = "xy";
+        }
     }
     else if (desc->plane_count == 1)
     {
-- 
2.32.0 (Apple Git-132)

